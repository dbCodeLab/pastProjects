LD=g++
LDFLAGS=-lX11 -lXt -lXext -lXmu -lm -O3 -funroll-loops
CPPFLAGS=-O3 -funroll-loops
# -funroll-loops

main: main.o XApplication.o XScreenRgbInfo.o XEngine.o XRasterizer.o XTextureLoaderPPM.o Plane.o BspTree.o Wall.o Sector.o Level.o
	$(LD) $^ -o $@ $(LDFLAGS)

main.o: main.cc
	$(LD) -c $^ $(CPPFLAGS)

XApplication.o: XApplication.cc
	$(LD) -c $^ $(LDFLAGS) $(CPPFLAGS) -DSHM_EXT

# metti -DSHM_EXT nelle opzioni di compilazione di Xapp per usare l'shm

XScreenRgbInfo.o: XScreenRgbInfo.cc
	$(LD) -c $^ $(LDFLAGS) $(CPPFLAGS)

XEngine.o: XEngine.cc
	$(LD) -c $^ $(CPPFLAGS)

XRasterizer.o: XRasterizer.cc
	$(LD) -c $^ $(CPPFLAGS)

XTextureLoaderPPM.o: XTextureLoaderPPM.cc
	$(LD) -c $^ $(CPPFLAGS)

Plane.o: Plane.cc
	$(LD) -c $^ $(CPPFLAGS)

BspTree.o: BspTree.cc
	$(LD) -c $^ $(CPPFLAGS)

Wall.o: Wall.cc
	$(LD) -c $^ $(CPPFLAGS)

Sector.o: Sector.cc
	$(LD) -c $^ $(CPPFLAGS)

Level.o: Level.cc
	$(LD) -c $^ $(CPPFLAGS)

clean:
	rm main main.o XApplication.o XScreenRgbInfo.o XEngine.o XRasterizer.o XTextureLoaderPPM.o Plane.o BspTree.o Wall.o Sector.o Level.o
